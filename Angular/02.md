# Angular 9 : Des donn√©es dynamiques ! - Cours

> Dans cette partie, nous allons voir comment rendre notre code dynamique. Dans le cours pr√©c√©dent, nous avons vu comment cr√©er un projet et construire notre premier component.

> Nous allons maintenant construire un nouveau projet bas√© sur *Tour of Heroes*, l'appli d'exemple de la documentation officielle de Angular que vous pouvez [retrouver ici](https://angular.io/tutorial) !

> Il s'agit d'un dashboard de gestion pour une agence de recrutement de h√©ros : on pourra ajouter, modifier, lister nos h√©ros.

> Vous apprendrez √† lire la documentation de Angular et commencer √† trouver les informations par vous-m√™me.

> Nous irons ensuite un peu plus loin que le tutoriel Angular pour ajouter une gestion de combat entre nos h√©ros !

## Cr√©er le projet
- Faites l'[exercice 3](exercices.md#exercice-3).

Au fait, comment est g√©r√© le component principal de notre application, celui qui contient les autres components ? En fait, il est appel√© dans le fichier `src/index.html` avec la  balise `<app-root>`.

Ce `<app-root>` correspond en fait au `app.component` qui se trouve d√©j√† dans le dossier `src` et qui est compos√©, comme tous les composants, de trois √©l√©ments :
- `app.component.html` ce qui va √™tre affich√©
- `app.component.scss` le CSS propre √† ce component
- `app.component.ts` la logique de ce component

C'est quoi, la "logique" du component ? C'est en fait tous les m√©canismes, les variables, le code Javascript (enfin, Typescript !) qui sera utilis√© dans ce component.

La structure de ce fichier est un peu particuli√®re : on y trouve une *classe* `AppComponent`, au dessus, un *d√©corateur* `@Component()`... On d√©couvrira petit √† petit tous ces √©l√©ments.

Mais pour commencer, travaillons dans la classe `AppComponent` et ajoutons-lui une variable nomm√©e `subTitle` et qui contiendra `"Ma premi√®re application Angular !"`.

![](img/c0201.png)

C'est une variable un peu particuli√®re : par de `var`, `let`, `const` ici ! En fait, quand on d√©clare une variable dans une classe, on appelle √ßa un *attribut*. C'est une variable un peu particuli√®re qui appartient √† la classe.

## Les classes

Une classe est une structure de code qui nous permet de stocker des informations bien tri√©es dedans. Par exemple, un array ou un objet vous permettent de stocker et trier des lots d'informations (un array de noms, un array de pays avec ses habitants et sa capitale...).

Une classe, c'est un array... En mieux ! √Ä un array, on peut lui donner toutes les informations que l'on souhaite, par exemple :

```js
let countries = [
    {
        name: "France",
        capital: "Paris",
        population: 66990000
    },
    {
        name: "Germany",
        capital: "Berlin",
        population: 82790000
    }
]
```

Mais on peut aussi lui donner des informations un peu bizarres sans aucun contr√¥le :
```js
let countries = [
    {
        name: "France",
        capital: "Paris",
        population: 66990000
    },
    {
        name: "Allemagne",
        capital: "Berlin",
        population: 82790000
    },
    {
        name: "Jar-Jar Binks",
        capital: "Otoh Gunga",
        friends: [
            "Qui-Gon Jinn",
            "Obi-Wan Kenobi"
        ]
    }
]
```

Une classe, c'est en fait un "super array" √† qui on va d√©finir le format de base, des donn√©es par d√©faut, pour √©viter ce genre d'erreurs !

> Attention : √† partir de maintenant, le code que nous saisissons est du Typescript. C'est √† dire qu'il ne fonctionnera pas dans un fichier Javascript classique. Au final, lorsque l'on compile le Typescript, un fichier Javascript est cr√©√© en bout de file. L'avantage de Typescript, c'est donc d'utiliser des fonctionnalit√©s avanc√©es que Javascript seul n'a pas (ou qui sont difficiles √† coder en Javascript natif, ou encore des fonctionnalit√©s pas encore sorties).

Pour d√©finir ce "format", nous allons dire qu'un pays doit avoir une capitale (en `string`) et une  population (en `number`). De plus, nous allons nommer notre classe `Country` puisqu'elle repr√©sente un pays.

- Cr√©ez le fichier `src/app/Country.php`. Attention au `C` majuscule ! Cette notation s'appelle `PascalCase` et est une convention obligatoire pour le nommage des classes.

![](img/c0202.png)

Et voil√† ! Je peux maintenant cr√©er des pays sans risquer d'ajouter un champ inutile (auquel cas mon IDE me mettra une erreur !) :

![](img/c0203.png)

Une classe, c'est aussi un nouveau type de donn√©es. De la m√™me mani√®re que `string` est un type de donn√©es qui poss√®de tous les caract√®res possibles, `number` un type de donn√©es qui ne poss√®de que des chiffres ou `object` qui poss√®de plusieurs strings, numbers et sous objets, `Country` est un type de donn√©es qui poss√®de une string `capital` et un number `population`.

Pour illustrer cela, vous pouvez cr√©er une classe `Continent` (dans le m√™me fichier pour cette fois car c'est un exercice) qui elle, contiendra un attribut `countries` qui prendra un tableau d'√©l√©ments de type... `Country` !

- Pour indiquer un tableau de string, on type avec `string[]`.
- Pour indiquer un tableau de `Country`, on type avec `Country[]`.

![](img/c0204.png)

- Faites l'[exercice 4](exercices.md#exercice-4).
- Faites l'[exercice 5](exercices.md#exercice-5).

## Interpolation

Maintenant que notre classe poss√®de des attributs, nous allons les utiliser √† la mani√®re de Angular pour les afficher dans notre page !

Angular poss√®de un moteur de template qui permet par exemple d'utiliser dans la partie HTML des variables qui viennent de la partie Typescript. On appelle √ßa l'interpolation : c'est un mot savant qui veut simplement dire "ins√©rer une variable qui vient d'un autre fichier" ! (mais c'est bien pour raconter son job √† des amis : *j'ai du relancer mon serveur Angular parce que l'interpolation ne voulait pas marcher correctement mais sinon bonne journ√©e et toi ?* üòé)

Concr√®tement, nous pouvons utiliser les variables d√©finies dans la partie Typescript du component (ici: `app.component.ts`) en les appelant dans la partie HTML du component (ici: `app.component.html`) en saisissant le code suivant:

> Note: vous pouvez supprimer l'int√©gralit√© du contenu de `app.component.html` comme d'habitude sans risques : c'est simplement le code qui vient par d√©faut √† la construction de l'application !

> N'oubliez pas de relancer votre serveur si √ßa n'est pas d√©j√† le cas !

![](img/c0205.png)

Vous allez maintenant mettre en pratique toutes vos connaissances pour cr√©er un component `heroes` qui contiendra la liste des h√©ros.


- Faites l'[exercice 6](exercices.md#exercice-4).
